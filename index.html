<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Augent Demos</title>
  <link rel="icon" type="image/png" href="images/favicon.png" />
  <!-- Google Font (Inter) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --accent: #00d4ff;
      --glass: rgba(255,255,255,0.03);
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    body{
      color: #0f1724;
      background: white;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      transition: background 0.6s ease,color 0.4s ease;
    }
    body header{
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        background: white;
    }
    body.scrolled header{
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    body .card-border{
      border: 1px solid rgba(0,0,0,0.05);
      background: white;
    }
    .card-border{
      border: 1px solid rgba(255,255,255,0.04);
      backdrop-filter: blur(6px);
      transition: background 0.4s ease, border 0.4s ease;
    }
    
    /* Iframe container styles */
    #iframe-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: white;
      z-index: 1000;
      display: none;
      flex-direction: column;
    }
    
    #iframe-container.active {
      display: flex;
    }
    
    #iframe-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem 1.5rem;
      background: white;
      border-bottom: 1px solid rgba(0,0,0,0.1);
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    #back-button {
      background: linear-gradient(135deg, var(--accent), #7ee7ff);
      color: #04202a;
      border: none;
      padding: 0.5rem 1.25rem;
      border-radius: 0.5rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    #back-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3);
    }
    
    #app-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: #0f1724;
    }
    
    #proxy-iframe {
      flex: 1;
      border: none;
      width: 100%;
      height: 100%;
    }
    
    #main-content {
      transition: opacity 0.3s ease;
    }
    
    #main-content.hidden {
      opacity: 0;
      pointer-events: none;
    }
  </style>
</head>
<body class="min-h-screen text-black antialiased">
  <!-- Iframe Container -->
  <div id="iframe-container">
    <div id="iframe-header">
      <button id="back-button">← Back to Hub</button>
      <span id="app-title"></span>
    </div>
    <iframe id="proxy-iframe" sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-modals"></iframe>
  </div>

  <!-- Main Content -->
  <div id="main-content" class="max-w-5xl mx-auto px-6 py-16">
    <!-- Header -->
    <header class="fixed top-0 left-0 w-full z-10 transition-all duration-500 bg-white py-4">
      <div class="max-w-5xl mx-auto flex items-center gap-4 px-6">
        <img src="images/logo.png" alt="Company logo" class="h-24 w-28 object-contain" />
        <div>
          <h1 class="text-2xl font-extrabold tracking-tight">Demo Hub</h1>
          <p class="text-sm text-black">Quick access to our Proof-of-Concept demos</p>
        </div>
      </div>
    </header>

    <div class="pt-24">
      <!-- Cards grid -->
      <main>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">

          <a href="https://insurance-ai.augent.ai/" data-route="insurance-ai" data-title="Insurance AI POC" class="demo-card group block rounded-2xl p-6 card-border hover:scale-[1.02] transition transform">
            <div class="flex items-start gap-4">
              <div class="flex-shrink-0 rounded-lg w-12 h-12 grid place-items-center text-lg font-bold" style="background:linear-gradient(135deg,var(--accent),#7ee7ff); color:#04202a">
                IA
              </div>
              <div class="flex-1">
                <h3 class="text-lg font-semibold">Insurance AI POC</h3>
                <p class="text-sm text-gray-400 mt-1">Automated claims triage and document understanding — open the demo.</p>
              </div>
              <div class="opacity-0 group-hover:opacity-100 transition text-gray-300">→</div>
            </div>
          </a>
          <a href="https://nldb.augent.ai/" target="_blank" rel="noopener noreferrer" class="group block rounded-2xl p-6 card-border hover:scale-[1.02] transition transform">
            <div class="flex items-start gap-4">
              <div class="flex-shrink-0 rounded-lg w-12 h-12 grid place-items-center text-lg font-bold" style="background:linear-gradient(135deg,#7cf6d4,#00d4ff); color:#013033">
                NL
              </div>
              <div class="flex-1">
                <h3 class="text-lg font-semibold">NLDB Project</h3>
                <p class="text-sm text-gray-400 mt-1">Natural-language-driven database explorer and query interface.</p>
              </div>
              <div class="opacity-0 group-hover:opacity-100 transition text-gray-300">→</div>
            </div>
          </a>

          <a href="https://idp.augent.ai/" data-route="idp" data-title="IDP" class="demo-card group block rounded-2xl p-6 card-border hover:scale-[1.02] transition transform">
            <div class="flex items-start gap-4">
              <div class="flex-shrink-0 rounded-lg w-12 h-12 grid place-items-center text-lg font-bold" style="background:linear-gradient(135deg,#ffd28a,#ff9b6b); color:#3b1600">
                IDP
              </div>
              <div class="flex-1">
                <h3 class="text-lg font-semibold">IDP</h3>
                <p class="text-sm text-gray-400 mt-1">Process your documents intelligently and extract named entties from your docs.</p>
              </div>
              <div class="opacity-0 group-hover:opacity-100 transition text-gray-300">→</div>
            </div>
          </a>

          <a href="https://doc-compare-ai.augent.ai/" data-route="insurance-comparison" data-title="Insurance Comparison POC" class="demo-card group block rounded-2xl p-6 card-border hover:scale-[1.02] transition transform">
            <div class="flex items-start gap-4">
              <div class="flex-shrink-0 rounded-lg w-12 h-12 grid place-items-center text-lg font-bold" style="background:linear-gradient(135deg,#b3a0ff,#7f8cff); color:#0b0533">
                IC
              </div>
              <div class="flex-1">
                <h3 class="text-lg font-semibold">Insurance Comparison POC</h3>
                <p class="text-sm text-gray-400 mt-1">Compare policy options and pricing with an AI-backed assistant.</p>
              </div>
              <div class="opacity-0 group-hover:opacity-100 transition text-gray-300">→</div>
            </div>
          </a>

          <a href="https://sea-route-analyzer.onrender.com/" data-route="sra" data-title="SRA" class="demo-card group block rounded-2xl p-6 card-border hover:scale-[1.02] transition transform">
            <div class="flex items-start gap-4">
              <div class="flex-shrink-0 rounded-lg w-12 h-12 grid place-items-center text-lg font-bold" style="background:linear-gradient(135deg,var(--accent),#7ee7ff); color:#04202a">
                SRA
              </div>
              <div class="flex-1">
                <h3 class="text-lg font-semibold">Sea Route Analyer</h3>
                <p class="text-sm text-gray-400 mt-1">An AI-powered platform that analyzes major global news events to deliver instant insights on their impact on international maritime trade.</p>
              </div>
              <div class="opacity-0 group-hover:opacity-100 transition text-gray-300">→</div>
            </div>
          </a>
          <a href="https://shipping-trade-impact-analyzer-1.onrender.com/" data-route="stia" data-title="STIA" class="demo-card group block rounded-2xl p-6 card-border hover:scale-[1.02] transition transform">
            <div class="flex items-start gap-4">
              <div class="flex-shrink-0 rounded-lg w-12 h-12 grid place-items-center text-lg font-bold" style="background:linear-gradient(135deg,#ffd28a,#ff9b6b); color:#3b1600">
                STIA
              </div>
              <div class="flex-1">
                <h3 class="text-lg font-semibold">Shipping Trade Impact Analyzer</h3>
                <p class="text-sm text-gray-400 mt-1">A real-time tool that tracks global shipping disruptions from live news and simulates impact metrics for instant operational insight.</p>
              </div>
              <div class="opacity-0 group-hover:opacity-100 transition text-gray-300">→</div>
            </div>
          </a>
          <a href="https://e-commerce-zw2c.onrender.com/" data-route="ewd" data-title="EWD" class="demo-card group block rounded-2xl p-6 card-border hover:scale-[1.02] transition transform">
            <div class="flex items-start gap-4">
              <div class="flex-shrink-0 rounded-lg w-12 h-12 grid place-items-center text-lg font-bold" style="background:linear-gradient(135deg,#7cf6d4,#00d4ff); color:#013033">
                EWD
              </div>
              <div class="flex-1">
                <h3 class="text-lg font-semibold">Ecommerce Whatsapp Dashboard</h3>
                <p class="text-sm text-gray-400 mt-1">A whatsapp dashboard with real-time monitoring & analytics for ecommerce</p>
              </div>
              <div class="opacity-0 group-hover:opacity-100 transition text-gray-300">→</div>
            </div>
          </a>
          <a href="https://idp-india-with-agent-unified.onrender.com" data-route="idpa" data-title="IDPA" class="demo-card group block rounded-2xl p-6 card-border hover:scale-[1.02] transition transform">
            <div class="flex items-start gap-4">
              <div class="flex-shrink-0 rounded-lg w-12 h-12 grid place-items-center text-lg font-bold" style="background:linear-gradient(135deg,#b3a0ff,#7f8cff); color:#0b0533">
                IDPA
              </div>
              <div class="flex-1">
                <h3 class="text-lg font-semibold">Intelligent Document Parsing Agent</h3>
                <p class="text-sm text-gray-400 mt-1">An upgrade to the pre-existing IDP app. The following tool can take actions based on the user requirements after parsing.</p>
              </div>
              <div class="opacity-0 group-hover:opacity-100 transition text-gray-300">→</div>
            </div>
          </a>

        </div>
      </main>
    </div>
  </div>

  <script>
    // Route mapping
    const routes = {};
    
    // Initialize routes from cards
    document.querySelectorAll('.demo-card').forEach(card => {
      const route = card.getAttribute('data-route');
      const url = card.getAttribute('href');
      const title = card.getAttribute('data-title');
      routes[route] = { url, title };
    });

    // DOM elements
    const iframeContainer = document.getElementById('iframe-container');
    const mainContent = document.getElementById('main-content');
    const proxyIframe = document.getElementById('proxy-iframe');
    const backButton = document.getElementById('back-button');
    const appTitle = document.getElementById('app-title');

    // Track iframe load attempts
    let iframeLoadTimeout = null;
    let currentRoute = null;

    // Load app in iframe
    function loadApp(route) {
      const app = routes[route];
      if (!app) return;

      currentRoute = route;
      proxyIframe.src = app.url;
      appTitle.textContent = app.title;
      iframeContainer.classList.add('active');
      mainContent.classList.add('hidden');
      
      // Update URL without reload
      history.pushState({ route }, '', `/${route}`);

      // Set timeout to detect if iframe fails to load
      clearTimeout(iframeLoadTimeout);
      iframeLoadTimeout = setTimeout(() => {
        // If iframe hasn't loaded after 3 seconds, assume it's blocked
        checkIframeBlocked(app.url, route);
      }, 3000);
    }

    // Check if iframe is blocked and fallback to new tab
    function checkIframeBlocked(url, route) {
      try {
        // Try to access iframe content - will throw error if blocked
        const iframeDoc = proxyIframe.contentDocument || proxyIframe.contentWindow.document;
        
        // If we can't access it or it's empty, it's likely blocked
        if (!iframeDoc || iframeDoc.body.children.length === 0) {
          fallbackToNewTab(url, route);
        }
      } catch (e) {
        // Cross-origin error means it loaded but we can't access it (this is OK)
        // If there's a different error, fall back
        if (!e.message.includes('cross-origin')) {
          fallbackToNewTab(url, route);
        }
      }
    }

    // Fallback to opening in new tab
    function fallbackToNewTab(url, route) {
      console.log(`Cannot embed ${url} - opening in new tab`);
      window.open(url, '_blank', 'noopener,noreferrer');
      goBack();
    }

    // Go back to hub
    function goBack() {
      iframeContainer.classList.remove('active');
      mainContent.classList.remove('hidden');
      proxyIframe.src = '';
      currentRoute = null;
      clearTimeout(iframeLoadTimeout);
      history.pushState({}, '', '/');
    }

    // Handle iframe load success
    proxyIframe.addEventListener('load', () => {
      clearTimeout(iframeLoadTimeout);
      
      // Additional check for blocked content
      try {
        const iframeDoc = proxyIframe.contentDocument || proxyIframe.contentWindow.document;
        if (iframeDoc && iframeDoc.body && iframeDoc.body.children.length === 0) {
          // Empty body might indicate blocking
          if (currentRoute) {
            const app = routes[currentRoute];
            if (app) {
              fallbackToNewTab(app.url, currentRoute);
            }
          }
        }
      } catch (e) {
        // Cross-origin is fine, means it loaded successfully
      }
    });

    // Handle iframe error
    proxyIframe.addEventListener('error', () => {
      if (currentRoute) {
        const app = routes[currentRoute];
        if (app) {
          fallbackToNewTab(app.url, currentRoute);
        }
      }
    });

    // Handle card clicks
    document.querySelectorAll('.demo-card').forEach(card => {
      card.addEventListener('click', (e) => {
        e.preventDefault();
        const route = card.getAttribute('data-route');
        loadApp(route);
      });
    });

    // Back button
    backButton.addEventListener('click', goBack);

    // Handle browser back/forward
    window.addEventListener('popstate', (e) => {
      if (e.state && e.state.route) {
        loadApp(e.state.route);
      } else {
        goBack();
      }
    });

    // Check initial URL
    const currentPath = window.location.pathname.slice(1);
    if (currentPath && routes[currentPath]) {
      loadApp(currentPath);
    }

    // Scroll handler for main content
    const body = document.body;
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        body.classList.add('scrolled');
      } else {
        body.classList.remove('scrolled');
      }
    });
  </script>
</body>
</html>